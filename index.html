<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Exam 2 Reference</title>
    <style>
      body {
        background-color: orange;
      }

      .topnav {
        overflow: hidden;
        background-color: green;
      }

      .topnav a {
        float: left;
        display: block;
        color: #f2f2f2;
        text-align: center;
        padding: 15px 20px;
        text-decoration: none;
      }

      img{
        float: left;
        width : 170px;
        height : 200px;
      }
      ol > li {
        border: 3px solid;
        clear: left;
        list-style-type: none;
        width: 600px;
        height: 200px;
        margin-bottom: 40px;
      }

      .topnav a:hover {
        background-color: red;
        color: black;
      }
      books{
        display:inline;
      }

    </style>
  </head>

  <body>

    <div class="topnav">
      <a href="#">Home</a>
      <a href="#">Community</a>
      <a href="#">Ask</a>
      <a href="#">About US</a>
    </div>

    <ul>


      <h4>Sort By:</h4>
      <select id="sort-option">

        <option value="rating">Rating</option>
        <option value="reviews">Reviews</option>
        <option value="Date">Date</option>


      </select>
    </ul>

    <div id = "books" >


      <ol id="bookslist">

      </ol>
    </div>
  </body>
  <script>
    var books = [{
      title: 'Harry Potter and the Prisoner of Azkaban: The Illustrated Edition (Harry Potter, Book 3)',
      date_published: 2017,
      author: 'Jim Kay',
      reviews: 6089,
      rate: 4.5,
      img: 'https://images-na.ssl-images-amazon.com/images/I/61mc3mRBvoL._SX258_BO1,204,203,200_.jpg'
    }, {
      title: 'The Gender Game 2: The Gender Secret ',
      date_published: 2016,
      author: 'Bella Forest',
      reviews: 1399,
      rate: 4.6,
      img: 'https://images-na.ssl-images-amazon.com/images/I/51Vvbg-kWBL._SX331_BO1,204,203,200_.jpg'
    }, {
      title: 'The Fallen (Memory Man series)',
      date_published: 2018,
      author: 'David Baldacci',
      reviews: 363,
      rate: 4.3,
      img: 'https://images-na.ssl-images-amazon.com/images/I/51GVuIHGNML._SX329_BO1,204,203,200_.jpg'
    }, {
      title: 'The 17th Suspect',
      date_published: 2018,
      author: 'James Patterson',
      reviews: 425,
      rate: 4.1,
      img: 'https://images-na.ssl-images-amazon.com/images/I/51ZICni-JKL._SX320_BO1,204,203,200_.jpg'
    }, {
      title: 'The Russian Assassin:A Max Austin Thriller, Book #1',
      date_published: 2015,
      author: 'Jack Arbor',
      reviews: 5232,
      rate: 4.8,
      img: 'https://images-na.ssl-images-amazon.com/images/I/51WPjmcGdlL.jpg'
    }

                ]

    sortByRating()
    upDateDOM()

    function createBookItem(bookObj) {

      var lists = document.getElementById("bookslist");
      var liElem = document.createElement('li')



      var img = document.createElement('img')
      img.src = bookObj.img
      liElem.appendChild(img);

      var Btitle = document.createElement("p")
      var Ttext = document.createTextNode("Title: " + bookObj.title)
      Btitle.appendChild(Ttext)
      liElem.appendChild(Btitle)

      var author = document.createElement("p")
      var Atext = document.createTextNode("Author: " + bookObj.author)
      author.appendChild(Atext)
      liElem.appendChild(author)

      var date = document.createElement("p")
      var Dtext = document.createTextNode("Published date: " + bookObj.date_published)
      date.appendChild(Dtext)
      liElem.appendChild(date);

      var star = document.createElement("p")
      var stext = document.createTextNode("Rate " + bookObj.rate)
      star.appendChild(stext)
      liElem.appendChild(star);

      var review = document.createElement("p")
      var rtext = document.createTextNode("Reviews " + bookObj.reviews)
      review.appendChild(rtext)
      liElem.appendChild(review);

      return liElem
    }

    function sortByReviews() {
      books.sort(function(a, b) {

        return b.reviews - a.reviews
      })
    }

    function sortByRating() {
      books.sort(function(a, b) {

        return b.rate - a.rate
      })
    }

    function sortByDate() {
      books.sort(function(a, b) {

        return b.date_published - a.date_published
      })
    }

    function upDateDOM() {
      var ulBooks = document.getElementById('bookslist')
      ulBooks.innerHTML = ''
      for (item of books) {
        ulBooks.appendChild(createBookItem(item))
      }
    }



    var select = document.getElementById("sort-option")
    select.onchange = function() {
      if (select.value === 'reviews') {
        sortByReviews()
        upDateDOM()
      } else if (select.value === 'rating') {
        sortByRating()
        upDateDOM()
      } else if (select.value === 'Date') {
        sortByDate()
        upDateDOM()
      }
    }

  </script>
</html>